<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="co.maeumi.prj.counselor.service.CounselorMapper">

	<select id="counselorSelectList"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		SELECT * FROM COUNSELOR
	</select>

	<select id="counselorSelect"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		SELECT * FROM COUNSELOR WHERE C_EMAIL=#{c_email}
	</select>

	<select id="counselorLogin"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		select * from counselor
		where c_email = #{c_email}
		and
		c_password = #{c_password}
	</select>

	<select id="counselorEmailCheck" resultType="boolean">
		SELECT CASE WHEN
		(COUNT(*) = 1) THEN 'TRUE' ELSE 'FALSE' END
		FROM COUNSELOR
		WHERE C_EMAIL
		= #{c_email}
	</select>

	<select id="counselorFindEmail"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		select c_email
		from counselor
		where regexp_replace(c_phone,
		'[-]', '') = #{c_phone}
	</select>

	<insert id="counselorInsert"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		INSERT INTO
		COUNSELOR( C_EMAIL, C_NAME, C_GENDER,
		C_PHONE, C_PASSWORD, C_ADDRESS,
		C_BIRTHDATE, C_GRADE )
		VALUES(#{c_email}, #{c_name}, #{c_gender},
		#{c_phone}, #{c_password},
		#{c_address},#{c_birthdate}, #{c_grade} )
	</insert>

	<update id="counselorPictureUpdate"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		UPDATE COUNSELOR SET
		C_PICTURE=#{c_picture},
		C_PICTUREPATH=#{c_picturepath}
		WHERE C_EMAIL=#{c_email}
	</update>

	<select id="counselorCareerList"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		SELECT * FROM cs_career
		where c_email=#{c_email}
	</select>

	<delete id="counselorCareerDelete"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		DELETE FROM cs_career
		WHERE c_email=#{c_email}
	</delete>

	<insert id="counselorCareerInsert"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		<selectKey keyProperty="cc_no" resultType="String"
			order="BEFORE">
			SELECT
			NVL(MAX(CC_NO),0)+1 FROM CS_CAREER
		</selectKey>
		INSERT INTO CS_CAREER VALUES(#{cc_no}, #{c_email}, #{cc_status},
		#{cc_subject})
	</insert>

	<select id="counselorCertificationList"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		SELECT * FROM cs_certification
		where c_email=#{c_email}
	</select>

	<delete id="counselorCertificationDelete"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		DELETE FROM cs_certification
		WHERE c_email=#{c_email}
	</delete>

	<insert id="counselorCertificationInsert"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		<selectKey keyProperty="ccf_no" resultType="String"
			order="BEFORE">
			SELECT
			NVL(MAX(CCF_NO),0)+1 FROM cs_certification
		</selectKey>
		INSERT INTO cs_certification VALUES(#{ccf_no}, #{c_email},
		#{ccf_name},
		#{ccf_issueby}, #{ccf_date})
	</insert>

	<select id="counselorinfoList"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		SELECT * FROM cs_info
		where c_email=#{c_email}
	</select>

	<delete id="counselorinfoDelete"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		DELETE FROM cs_info
		WHERE c_email=#{c_email}
	</delete>

	<insert id="counselorinfoInsert"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		<selectKey keyProperty="ci_no" resultType="String"
			order="BEFORE">
			SELECT
			NVL(MAX(Ci_NO),0)+1 FROM cs_info
		</selectKey>
		INSERT INTO cs_info VALUES(#{ci_no}, #{c_email}, #{ci_title},
		#{ci_subject})
	</insert>

	<select id="counselortimeList"
		resultType="co.maeumi.prj.counselor.service.CounselorVO">
		SELECT * FROM cs_date
		where c_email=#{c_email}
	</select>

	<delete id="counselortimeDelete"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		DELETE FROM cs_date
		WHERE c_email=#{c_email}
	</delete>

	<insert id="counselortimeInsert"
		parameterType="co.maeumi.prj.counselor.service.CounselorVO">
		<selectKey keyProperty="cd_no" resultType="String"
			order="BEFORE">
			SELECT
			NVL(MAX(Cd_NO),0)+1 FROM cs_date
		</selectKey>
		INSERT INTO cs_date VALUES(#{cd_no}, #{c_email}, #{cd_day},
		#{cd_time})
	</insert>
</mapper>